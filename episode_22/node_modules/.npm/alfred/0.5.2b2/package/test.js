var col = require('./lib/alfred/collection');

col.open('tmp/collection_test.alf', function(err, col) {
  if (err) {throw err; }
  var count = 0;
  col.read(function(err, record) {
    if (err) {throw err; }
    //console.log(record);
    if (!record) {
      console.log('finished reading ' + count + ' records');
      col.end(function(err) {
        if (err) {throw err; }
        console.log('bye bye!');
      });
    } else {
      count ++;
    }
  }, true);
});
